(this.webpackJsonpbasic_chat_app=this.webpackJsonpbasic_chat_app||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(26),r=n.n(s),i=(n(35),n(30)),o=n(4),j=(n(36),n(9)),u=n.n(j),l=n(14),b=n(18),h=n.n(b);n(41),n(42);h.a.initializeApp({apiKey:"AIzaSyBIutCSF14eRH8V0cty4TnnAzIIdIb2wu0",authDomain:"chat-app-95e20.firebaseapp.com",databaseURL:"https://chat-app-95e20-default-rtdb.firebaseio.com",projectId:"chat-app-95e20",storageBucket:"chat-app-95e20.appspot.com",messagingSenderId:"542333898861",appId:"1:542333898861:web:fc457e96255f51843faf64",measurementId:"G-TN1X82V4HX"});var O=h.a.auth(),d=h.a.database();function p(e,t){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("email ",t,"password",n),e.abrupt("return",O.createUserWithEmailAndPassword(t,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return O.signInWithEmailAndPassword(e,t)}var m=n(2),g=n(10);function v(e,t){d.ref("user").push({name:e,email:t})}var S=n(0);var I=function(e){var t=e.messages,n=Object(g.useState)(""),c=Object(o.a)(n,2),a=c[0],s=c[1],r=localStorage.getItem("userInfo"),i=function(e){return localStorage.getItem("userInfo")===e.userInfo?"right":"left"};return Object(S.jsxs)("div",{className:"chatBox",children:[t&&t.map((function(e){return Object(S.jsx)("li",{className:i(e),children:e.content})})),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e,t){d.ref("messages").push({content:e,timeStamp:Date.now(),userInfo:t})}(a,r),s("")},children:[Object(S.jsx)("input",{value:a,onChange:function(e){return s(e.target.value)}}),Object(S.jsx)("button",{type:"submit",children:"Send"})]})]})};var C=function(e){var t=Object(g.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(g.useState)([]),i=Object(o.a)(r,2),j=i[0],u=i[1],l=Object(g.useState)(!1),b=Object(o.a)(l,2),h=b[0],p=b[1],f=Object(g.useState)([]),x=Object(o.a)(f,2),v=x[0],C=x[1];Object(c.useEffect)((function(){s(localStorage.getItem("userInfo"))}),[]),console.log("user Name",a);var N=Object(m.g)();return Object(c.useEffect)((function(){d.ref("user").on("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();t.push({name:n.name,email:n.email})})),u(t)})),console.log("user is a ",j),d.ref("messages").on("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();t.push(n)})),console.log("messages",t),C(t)}))})),Object(S.jsxs)("div",{children:[Object(S.jsxs)("h2",{children:["Hi ",a,",Let's Chat with the open universe"]}),Object(S.jsx)("button",{onClick:function(){localStorage.removeItem("userInfo"),O.signOut,N.push("/"),localStorage.removeItem("userInfo")},children:" signout"}),Object(S.jsx)("button",{onClick:function(){p(!0)},children:"Let's Chat"}),Object(S.jsxs)("div",{className:"all-users",children:[Object(S.jsx)("h4",{children:"Available users"}),j.map((function(e){return Object(S.jsx)("div",{className:e.name,children:Object(S.jsx)("ol",{children:Object(S.jsx)("b",{children:e.name})})})}))]}),h&&Object(S.jsx)(I,{messages:v})]})};var N=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],b=i[1],h=Object(c.useState)(""),O=Object(o.a)(h,2),d=O[0],f=O[1],x=Object(c.useState)(""),g=Object(o.a)(x,2),I=g[0],C=g[1],N=Object(m.g)(),w=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(a,j);case 3:t=e.sent,console.log("Signup Success ",t),N.push("/signin"),v(d,a),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),C(e.t0),console.log(e.t0),console.log("hi this is an error");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return localStorage.getItem("userInfo")?Object(S.jsx)(m.a,{to:"/chat"}):Object(S.jsx)("div",{children:I?Object(S.jsx)("h3",{children:"This is an error"}):Object(S.jsxs)("div",{className:"signnup",children:[Object(S.jsxs)("div",{className:"name",children:[Object(S.jsx)("label",{children:"Name"}),Object(S.jsx)("input",{type:"text",onChange:function(e){return f(e.target.value)}})]}),Object(S.jsxs)("div",{className:"email",children:[Object(S.jsx)("label",{children:"Email"}),Object(S.jsx)("input",{type:"email",onChange:function(e){return s(e.target.value)}})]}),Object(S.jsxs)("div",{className:"email",children:[Object(S.jsx)("label",{children:"Password"}),Object(S.jsx)("input",{type:"text",onChange:function(e){return b(e.target.value)}})]}),Object(S.jsx)("button",{onClick:w,children:"Signup"})]})})};var w=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],b=i[1],h=Object(c.useState)({}),O=Object(o.a)(h,2),d=O[0],p=O[1],f=Object(m.g)(),g=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(a,j);case 3:t=e.sent,console.log(t.user.email,"Log  in succesfully"),localStorage.setItem("userInfo",t.user.email),f.push("/chat"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),p(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return localStorage.getItem("userInfo")?Object(S.jsx)(m.a,{to:"/chat"}):Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:null===d||void 0===d?void 0:d.message}),Object(S.jsxs)("div",{className:"signin",children:[Object(S.jsxs)("div",{className:"email",children:[Object(S.jsx)("label",{children:"Email"}),Object(S.jsx)("input",{type:"email",onChange:function(e){return s(e.target.value)}})]}),Object(S.jsxs)("div",{className:"email",children:[Object(S.jsx)("label",{children:"Password"}),Object(S.jsx)("input",{type:"text",onChange:function(e){return b(e.target.value)}})]}),Object(S.jsx)("button",{onClick:g,children:"Signin"})]})]})},y=n(11);var k=function(e){return localStorage.getItem("userInfo")?Object(S.jsx)(m.a,{to:"/chat"}):Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"App-logo"}),Object(S.jsx)("h2",{children:"Welcome to the Q chat App Let's Connect the Universe"}),Object(S.jsxs)("div",{className:"signup-btn",children:[Object(S.jsx)(y.b,{to:"/signup",children:Object(S.jsx)("button",{children:" Signup"})}),Object(S.jsx)(y.b,{to:"/signin",children:Object(S.jsx)("button",{children:" Signin"})})]})]})};var A=function(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:" Hi user ,You are lost in virtual forest. "}),Object(S.jsx)("h1",{children:"  Go to Home by clicking Q-Chat"})]})};var E=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],r=e.pic;return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"container",children:[Object(S.jsxs)(y.b,{to:"/",children:[" ",Object(S.jsx)("h2",{children:" Q-Chat App"})]}),Object(S.jsx)("div",{children:Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:a}),Object(S.jsx)("button",{onClick:function(){var e=localStorage.getItem("userInfo");s(e)},children:"Update Name"})]})})]}),Object(S.jsx)("img",{alt:"name",src:r})]})},L=n.p+"static/media/pic.d0b88141.jpg",H=n(29);var P=function(){var e=Object(g.useState)({}),t=Object(o.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){var e=H.auth.currentUser;a(e)}),[]),console.log("user ",n,"  is logged in");var s=localStorage.getItem("userInfo");function r(e){var t=e.Component,n=(e.props,e.path);return Object(S.jsx)(m.b,{path:n,render:function(e){return s?Object(S.jsx)(t,Object(i.a)({},e)):Object(S.jsx)(m.a,{to:"/signin"})}})}return console.log(s),Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("h1",{children:"Hello World"}),Object(S.jsxs)(y.a,{children:[Object(S.jsx)(E,{pic:L}),Object(S.jsxs)(m.d,{children:[Object(S.jsx)(m.b,{path:"/",exact:!0,component:k}),Object(S.jsx)(m.b,{path:"/signup",exact:!0,component:N}),Object(S.jsx)(m.b,{path:"/signin",exact:!0,component:w}),Object(S.jsx)(r,{path:"/chat",Component:C}),Object(S.jsx)(m.b,{component:A})]})]})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(P,{})}),document.getElementById("root")),B()}},[[61,1,2]]]);
//# sourceMappingURL=main.d79c21aa.chunk.js.map